<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phasmophobia Fact File</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
            color: #e0e0e0;
            min-height: 100vh;
            background-attachment: fixed;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            border-bottom: 2px solid #333;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 3em;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #bbb;
            font-style: italic;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tab {
            background: #222;
            color: #fff;
            border: 2px solid #444;
            padding: 12px 24px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-family: inherit;
            font-size: 16px;
        }

        .tab:hover {
            background: #333;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .tab.active {
            background: #444;
            border-color: #666;
            color: #fff;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        .tab-content {
            display: none;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #333;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .tab-content.active {
            display: block;
        }

        .evidence-selector {
            background: #1a1a1a;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 2px solid #333;
        }

        .evidence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .evidence-item {
            background: #222;
            border: 2px solid #444;
            border-radius: 5px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .evidence-item:hover {
            border-color: #666;
            background: #2a2a2a;
        }

        .evidence-item.selected {
            background: #333;
            border-color: #fff;
            color: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .result {
            background: #1a1a1a;
            border: 2px solid #444;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .ghost-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
        }

        .ghost-card {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            text-align: center;
        }

        .ghost-card:hover {
            border-color: #555;
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(255, 255, 255, 0.1);
        }

        .ghost-icon {
            width: 80px;
            height: 80px;
            background: #333;
            border-radius: 10px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #555;
            overflow: hidden;
        }

        .ghost-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .ghost-name {
            font-size: 1.2em;
            color: #fff;
            margin-bottom: 10px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }

        .evidence-list {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .evidence-badge {
            background: #333;
            color: #fff;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            border: 1px solid #555;
        }

        .evidence-badge.selected {
            background: #4CAF50;
            border-color: #4CAF50;
        }

        .clear-btn {
            background: #444;
            color: #fff;
            border: 2px solid #666;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .clear-btn:hover {
            background: #555;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
        }

        .modal-content {
            background: #1a1a1a;
            margin: 5% auto;
            padding: 30px;
            border: 2px solid #333;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 10px;
        }

        .close:hover {
            color: #fff;
        }

        .modal-ghost-name {
            font-size: 2em;
            color: #fff;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .ghost-section {
            margin-bottom: 20px;
            background: #222;
            padding: 15px;
            border-radius: 8px;
        }

        .ghost-section h3 {
            color: #ccc;
            margin-bottom: 10px;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .map-card {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .map-card:hover {
            border-color: #555;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
        }

        .map-name {
            font-size: 1.5em;
            color: #fff;
            margin-bottom: 15px;
            text-align: center;
        }

        .map-image {
            width: 100%;
            height: 200px;
            background: #333;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 2px solid #444;
            overflow: hidden;
        }

        .map-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cursed-objects-preview {
            background: #222;
            border-radius: 5px;
            padding: 15px;
        }

        .object-count {
            color: #4CAF50;
            font-weight: bold;
            font-size: 1.1em;
        }

        .possible-ghosts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Phasmophobia Fact File</h1>
            <p>Your complete guide to ghost hunting</p>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('evidence')">Evidence Identifier</div>
            <div class="tab" onclick="showTab('ghosts')">Ghost Database</div>
            <div class="tab" onclick="showTab('maps')">Cursed Objects & Maps</div>
        </div>

        <!-- Evidence Tab -->
        <div id="evidence" class="tab-content active">
            <div class="evidence-selector">
                <h2 style="color: #fff; margin-bottom: 20px; text-align: center;">Select Evidence Found</h2>
                <div class="evidence-grid">
                    <div class="evidence-item" data-evidence="emf">EMF Level 5</div>
                    <div class="evidence-item" data-evidence="fingerprints">Ultraviolet</div>
                    <div class="evidence-item" data-evidence="freezing">Freezing Temperatures</div>
                    <div class="evidence-item" data-evidence="dots">D.O.T.S Projector</div>
                    <div class="evidence-item" data-evidence="writing">Ghost Writing</div>
                    <div class="evidence-item" data-evidence="orbs">Ghost Orbs</div>
                    <div class="evidence-item" data-evidence="spiritbox">Spirit Box</div>
                </div>
                <button class="clear-btn" onclick="clearEvidence()">Clear All Evidence</button>
            </div>
            
            <div class="result" id="result">
                <h3 style="color: #fff; margin-bottom: 15px;">Possible Ghosts</h3>
                <div id="possible-ghosts">Select evidence to identify possible ghosts</div>
            </div>
        </div>

        <!-- Ghost Database Tab -->
        <div id="ghosts" class="tab-content">
            <h2 style="color: #fff; margin-bottom: 30px; text-align: center;">Ghost Database</h2>
            <div class="ghost-grid" id="ghost-database"></div>
        </div>

        <!-- Maps Tab -->
        <div id="maps" class="tab-content">
            <h2 style="color: #fff; margin-bottom: 30px; text-align: center;">Cursed Objects & Maps</h2>
            <div class="map-grid" id="map-database"></div>
        </div>
    </div>

    <!-- Modal for ghost details -->
    <div id="ghost-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="ghost-details"></div>
        </div>
    </div>

    <!-- Modal for map details -->
    <div id="map-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="map-details"></div>
        </div>
    </div>

    <script>
        // Ghost database with file paths for icons
        const ghosts = {
            "Spirit": {
                evidence: ["emf", "spiritbox", "writing"],
                strength: "Nothing notable",
                weakness: "Using Smudge Sticks on a Spirit will stop it from hunting for a long period of time",
                tips: "Very common ghost type. Look for basic evidence combinations.",
                icon: "/icons/spirit.png"
            },
            "Wraith": {
                evidence: ["emf", "spiritbox", "dots"],
                strength: "Wraiths almost never touch the ground, meaning it will rarely leave a footstep or footprint",
                weakness: "Wraiths have a toxic reaction to Salt. If a Wraith comes into contact with a pile of salt, it will immediately become more active",
                tips: "Use salt to identify - they become very aggressive when touching it.",
                icon: "/icons/wraith.png"
            },
            "Phantom": {
                evidence: ["spiritbox", "fingerprints", "dots"],
                strength: "Looking at a Phantom will considerably drop your Sanity",
                weakness: "Taking a photo of the Phantom will make it temporarily disappear",
                tips: "Take photos when you see it to make it disappear temporarily.",
                icon: "/icons/phantom.png"
            },
            "Poltergeist": {
                evidence: ["spiritbox", "fingerprints", "writing"],
                strength: "Poltergeists can throw multiple objects at once, and with great force",
                weakness: "Poltergeists are ineffective in empty rooms with no throwable objects",
                tips: "Clear rooms of objects to reduce its power.",
                icon: "/icons/poltergeist.png"
            },
            "Banshee": {
                evidence: ["fingerprints", "orbs", "dots"],
                strength: "Banshees will focus on one person at a time until they are dead or leave the area",
                weakness: "Banshees fear the Crucifix and will be less aggressive when near one",
                tips: "It targets one player specifically. Use crucifixes for protection.",
                icon: "/icons/banshee.png"
            },
            "Jinn": {
                evidence: ["emf", "fingerprints", "freezing"],
                strength: "Jinns travel at a faster speed if their victim is far from them",
                weakness: "Turning off the location's power source will prevent Jinns from using their ability",
                tips: "Turn off the power to limit its abilities.",
                icon: "/icons/jinn.png"
            },
            "Mare": {
                evidence: ["spiritbox", "orbs", "writing"],
                strength: "Mares will have an increased chance to attack in the dark",
                weakness: "Mares are less likely to attack if the lights in the room are on",
                tips: "Keep lights on to reduce its aggression.",
                icon: "/icons/mare.png"
            },
            "Revenant": {
                evidence: ["orbs", "writing", "freezing"],
                strength: "Revenants will travel at a significantly faster speed when hunting their victim",
                weakness: "Hiding from the Revenant will cause it to move very slowly",
                tips: "Hide when it's hunting - it moves much slower when it can't see you.",
                icon: "/icons/revenant.png"
            },
            "Shade": {
                evidence: ["emf", "writing", "freezing"],
                strength: "Shades are much harder to find",
                weakness: "Shades will rarely hunt if there are multiple people nearby",
                tips: "Send in team members alone to increase activity.",
                icon: "/icons/shade.png"
            },
            "Demon": {
                evidence: ["fingerprints", "writing", "freezing"],
                strength: "Demons will initiate hunts more often than other ghosts",
                weakness: "Demons fear Crucifixes and will be less aggressive when near them",
                tips: "Very aggressive hunter. Keep crucifixes nearby.",
                icon: "/icons/demon.png"
            },
            "Yurei": {
                evidence: ["orbs", "freezing", "dots"],
                strength: "Yurei have been known to have a stronger effect on people's sanity",
                weakness: "Smudging the Yurei's place of death will trap it temporarily, reducing how much it wanders",
                tips: "Smudge its room to contain it temporarily.",
                icon: "/icons/yurei.png"
            },
            "Oni": {
                evidence: ["emf", "freezing", "dots"],
                strength: "Onis are more active when people are nearby and can move objects at great speed",
                weakness: "Onis are very active, making them easier to find",
                tips: "Very active ghost - easy to find but dangerous.",
                icon: "/icons/oni.png"
            },
            "Hantu": {
                evidence: ["fingerprints", "orbs", "freezing"],
                strength: "Hantus move faster in colder areas and slower in warmer areas",
                weakness: "Hantus move slower in warmer areas and will not speed up in cold areas if the fuse box is off",
                tips: "Turn off breaker in cold areas to slow it down.",
                icon: "/icons/hantu.png"
            },
            "Yokai": {
                evidence: ["spiritbox", "orbs", "dots"],
                strength: "Yokai get angrier around active electronics",
                weakness: "Yokai can only hear voices close to it during a hunt",
                tips: "Stay quiet during hunts - it has limited hearing range.",
                icon: "/icons/yokai.png"
            },
            "Goryo": {
                evidence: ["emf", "fingerprints", "dots"],
                strength: "Goryos will only show themselves on camera if there are no people nearby",
                weakness: "Goryos are rarely seen far from their place of death",
                tips: "Look for DOTS evidence when no one is in the room.",
                icon: "/icons/goryo.png"
            },
            "Myling": {
                evidence: ["emf", "fingerprints", "writing"],
                strength: "Mylings are known to be quieter when hunting",
                weakness: "Mylings make more noise on the Parabolic Microphone",
                tips: "Use parabolic microphone - they're louder on it but quieter when hunting.",
                icon: "/icons/myling.png"
            },
            "Onryo": {
                evidence: ["spiritbox", "orbs", "freezing"],
                strength: "When threatened, Onryos will attack without warning",
                weakness: "Onryos fear any form of fire, and will be less aggressive near campfires, torches, etc.",
                tips: "Use candles and fire sources to calm it down.",
                icon: "/icons/onryo.png"
            },
            "The Twins": {
                evidence: ["emf", "spiritbox", "freezing"],
                strength: "Either Twin can be angered and initiate an attack on their prey",
                weakness: "The Twins will often interact with the environment at the same time",
                tips: "Look for simultaneous interactions in different areas.",
                icon: "/icons/twins.png"
            },
            "Raiju": {
                evidence: ["emf", "orbs", "dots"],
                strength: "Raiju are constantly disrupting electronic equipment, making it malfunction more often",
                weakness: "Raiju move faster near active electronic equipment",
                tips: "Turn off electronics to slow it down during hunts.",
                icon: "/icons/raiju.png"
            },
            "Obake": {
                evidence: ["emf", "fingerprints", "orbs"],
                strength: "Obake will rarely leave a trace when interacting with the environment",
                weakness: "Sometimes Obake will shapeshift, leaving behind unique evidence",
                tips: "Look for 6-fingered handprints as unique evidence.",
                icon: "/icons/obake.png"
            },
            "The Mimic": {
                evidence: ["spiritbox", "fingerprints", "freezing", "orbs"],
                strength: "The Mimic will copy the traits and behaviours of other ghosts",
                weakness: "The Mimic will always have Ghost Orbs as evidence",
                tips: "Always shows Ghost Orbs. Appears when you have 4+ evidence or no matching ghost.",
                icon: "/icons/mimic.png"
            },
            "Moroi": {
                evidence: ["spiritbox", "writing", "freezing"],
                strength: "Moroi move faster when players have low sanity",
                weakness: "Moroi suffer from hyperosmia, weakening them near smudged areas",
                tips: "Keep sanity high and use smudge sticks in the room.",
                icon: "/icons/moroi.png"
            },
            "Deogen": {
                evidence: ["spiritbox", "writing", "dots"],
                strength: "Deogen constantly sense the living and can't be hidden from during hunts",
                weakness: "Deogen move slowly when near their target during hunts",
                tips: "You can't hide from it, but it moves very slowly when close.",
                icon: "/icons/deogen.png"
            },
            "Thaye": {
                evidence: ["orbs", "writing", "dots"],
                strength: "Thaye become more active and aggressive over time",
                weakness: "Thaye weaken over time, making them slower and less aggressive",
                tips: "Gets weaker over time. Complete objectives quickly.",
                icon: "/icons/thaye.png"
            }
        };

        // Maps database with file paths for map images
        const maps = {
            "Tanglewood Street House": {
                image: "/maps/tanglewood.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Living Room table"] },
                    { type: "Ouija Board", locations: ["Basement"] },
                    { type: "Music Box", locations: ["Nursery room shelf"] },
                    { type: "Voodoo Doll", locations: ["Garage"] },
                    { type: "Haunted Mirror", locations: ["Hallway"] },
                    { type: "Summoning Circle", locations: ["Basement"] }
                ]
            },
            "Edgefield Street House": {
                image: "/maps/edgefield.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Kitchen table", "Living room", "Master bedroom"] },
                    { type: "Ouija Board", locations: ["Living room", "Master bedroom", "Garage"] },
                    { type: "Music Box", locations: ["Living room", "Kitchen", "Utility room"] },
                    { type: "Voodoo Doll", locations: ["Master bedroom", "Boys bedroom", "Living room"] },
                    { type: "Haunted Mirror", locations: ["Master bathroom", "Hallway", "Master bedroom"] },
                    { type: "Summoning Circle", locations: ["Garage", "Living room", "Backyard"] }
                ]
            },
            "Ridgeview Court House": {
                image: "/maps/ridgeview.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Kitchen counter", "Living room table", "Master bedroom"] },
                    { type: "Ouija Board", locations: ["Living room", "Master bedroom", "Garage"] },
                    { type: "Music Box", locations: ["Living room", "Kitchen", "Master bedroom"] },
                    { type: "Voodoo Doll", locations: ["Living room", "Master bedroom", "Girls bedroom"] },
                    { type: "Haunted Mirror", locations: ["Bathroom", "Master bedroom", "Hallway"] },
                    { type: "Summoning Circle", locations: ["Garage", "Backyard", "Living room"] }
                ]
            },
            "Grafton Farmhouse": {
                image: "/maps/grafton.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Kitchen table", "Living room", "Master bedroom"] },
                    { type: "Ouija Board", locations: ["Living room", "Master bedroom", "Storage room"] },
                    { type: "Music Box", locations: ["Living room", "Kitchen", "Dining room"] },
                    { type: "Voodoo Doll", locations: ["Master bedroom", "Living room", "Storage room"] },
                    { type: "Haunted Mirror", locations: ["Bathroom", "Master bedroom", "Hallway"] },
                    { type: "Summoning Circle", locations: ["Storage room", "Living room", "Master bedroom"] }
                ]
            },
            "Bleasdale Farmhouse": {
                image: "/maps/bleasdale.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Kitchen", "Living room", "Master bedroom"] },
                    { type: "Ouija Board", locations: ["Living room", "Master bedroom", "Attic"] },
                    { type: "Music Box", locations: ["Living room", "Kitchen", "Attic"] },
                    { type: "Voodoo Doll", locations: ["Master bedroom", "Living room", "Attic"] },
                    { type: "Haunted Mirror", locations: ["Bathroom", "Master bedroom", "Attic"] },
                    { type: "Summoning Circle", locations: ["Attic", "Living room", "Master bedroom"] }
                ]
            },
            "Brownstone High School": {
                image: "/maps/brownstone.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Classroom 1", "Principal's office", "Cafeteria"] },
                    { type: "Ouija Board", locations: ["Classroom 2", "Principal's office", "Gym"] },
                    { type: "Music Box", locations: ["Cafeteria", "Classroom 1", "Gym"] },
                    { type: "Voodoo Doll", locations: ["Principal's office", "Classroom 2", "Boys locker room"] },
                    { type: "Haunted Mirror", locations: ["Boys bathroom", "Girls bathroom", "Principal's office"] },
                    { type: "Summoning Circle", locations: ["Gym", "Cafeteria", "Classroom 1"] }
                ]
            },
            "Prison": {
                image: "/maps/prison.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Cell block A", "Cell block B", "Cafeteria"] },
                    { type: "Ouija Board", locations: ["Cell block A", "Cell block B", "Infirmary"] },
                    { type: "Music Box", locations: ["Cafeteria", "Infirmary", "Cell block A"] },
                    { type: "Voodoo Doll", locations: ["Cell block B", "Infirmary", "Cafeteria"] },
                    { type: "Haunted Mirror", locations: ["Cell block A bathroom", "Cell block B bathroom", "Infirmary"] },
                    { type: "Summoning Circle", locations: ["Cafeteria", "Cell block A", "Cell block B"] }
                ]
            },
            "Asylum": {
                image: "/maps/asylum.png",
                cursedObjects: [
                    { type: "Tarot Cards", locations: ["Lobby", "Office", "Cafeteria"] },
                    { type: "Ouija Board", locations: ["Lobby", "Office", "Basement"] },
                    { type: "Music Box", locations: ["Cafeteria", "Office", "Old ward"] },
                    { type: "Voodoo Doll", locations: ["Office", "Old ward", "Basement"] },
                    { type: "Haunted Mirror", locations: ["Bathroom", "Office", "Old ward"] },
                    { type: "Summoning Circle", locations: ["Basement", "Cafeteria", "Old ward"] }
                ]
            }
        };

        let selectedEvidence = [];

        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Initialize content if needed
            if (tabName === 'ghosts') {
                initializeGhostDatabase();
            } else if (tabName === 'maps') {
                initializeMapDatabase();
            }
        }

        function initializeGhostDatabase() {
            const container = document.getElementById('ghost-database');
            if (container.innerHTML) return; // Already initialized

            container.innerHTML = Object.keys(ghosts).map(ghostName => `
                <div class="ghost-card" onclick="showGhostDetails('${ghostName}')">
                    <div class="ghost-icon">
                        <img src="${ghosts[ghostName].icon}" alt="${ghostName}" onerror="this.style.display='none'; this.parentNode.innerHTML='üëª';">
                    </div>
                    <div class="ghost-name">${ghostName}</div>
                    <div class="evidence-list">
                        ${ghosts[ghostName].evidence.map(ev => `
                            <span class="evidence-badge">${getEvidenceName(ev)}</span>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function initializeMapDatabase() {
            const container = document.getElementById('map-database');
            if (container.innerHTML) return; // Already initialized

            container.innerHTML = Object.keys(maps).map(mapName => `
                <div class="map-card" onclick="showMapDetails('${mapName}')">
                    <div class="map-name">${mapName}</div>
                    <div class="map-image">
                        <img src="${maps[mapName].image}" alt="${mapName}" onerror="this.style.display='none'; this.parentNode.innerHTML='üó∫Ô∏è';">
                    </div>
                    <div class="cursed-objects-preview">
                        <div class="object-count">${maps[mapName].cursedObjects.length} Cursed Objects</div>
                        <div style="margin-top: 10px; color: #bbb;">
                            ${maps[mapName].cursedObjects.map(obj => obj.type).join(', ')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getEvidenceName(evidence) {
            const evidenceNames = {
                'emf': 'EMF 5',
                'fingerprints': 'Ultraviolet',
                'freezing': 'Freezing',
                'dots': 'D.O.T.S',
                'writing': 'Writing',
                'orbs': 'Ghost Orbs',
                'spiritbox': 'Spirit Box'
            };
            return evidenceNames[evidence] || evidence;
        }

        // Evidence selection
        document.addEventListener('DOMContentLoaded', function() {
            const evidenceItems = document.querySelectorAll('.evidence-item');
            
            evidenceItems.forEach(item => {
                item.addEventListener('click', function() {
                    const evidence = this.dataset.evidence;
                    
                    if (this.classList.contains('selected')) {
                        // Deselect evidence
                        this.classList.remove('selected');
                        selectedEvidence = selectedEvidence.filter(e => e !== evidence);
                    } else {
                        // Select evidence (max 4 for mimic detection)
                        if (selectedEvidence.length < 4) {
                            this.classList.add('selected');
                            selectedEvidence.push(evidence);
                        }
                    }
                    
                    updateResults();
                });
            });
        });

        function clearEvidence() {
            selectedEvidence = [];
            document.querySelectorAll('.evidence-item').forEach(item => {
                item.classList.remove('selected');
            });
            updateResults();
        }

        function updateResults() {
            const resultContainer = document.getElementById('possible-ghosts');
            
            if (selectedEvidence.length === 0) {
                resultContainer.innerHTML = '<p style="color: #bbb;">Select evidence to identify possible ghosts</p>';
                return;
            }

            // Find matching ghosts
            let matchingGhosts = [];
            
            // Check if selected evidence has 4 pieces or doesn't match any ghost exactly
            let exactMatches = Object.keys(ghosts).filter(ghostName => {
                if (ghostName === 'The Mimic') return false; // Skip mimic for exact matching
                
                const ghostEvidence = ghosts[ghostName].evidence;
                return selectedEvidence.length === ghostEvidence.length && 
                       selectedEvidence.every(ev => ghostEvidence.includes(ev)) &&
                       ghostEvidence.every(ev => selectedEvidence.includes(ev));
            });

            // If 4 evidence selected or no exact matches found with 3 evidence, it's The Mimic
            if (selectedEvidence.length >= 4 || (selectedEvidence.length === 3 && exactMatches.length === 0)) {
                matchingGhosts = ['The Mimic'];
            } else {
                // Find ghosts that could match with the current evidence
                matchingGhosts = Object.keys(ghosts).filter(ghostName => {
                    if (ghostName === 'The Mimic') return false;
                    
                    const ghostEvidence = ghosts[ghostName].evidence;
                    return selectedEvidence.every(ev => ghostEvidence.includes(ev));
                });
            }

            if (matchingGhosts.length === 0) {
                resultContainer.innerHTML = '<p style="color: #ff6b6b;">No ghosts match this evidence combination. Check for The Mimic!</p>';
                return;
            }

            resultContainer.innerHTML = `
                <div class="possible-ghosts-grid">
                    ${matchingGhosts.map(ghostName => `
                        <div class="ghost-card" onclick="showGhostDetails('${ghostName}')">
                            <div class="ghost-icon">
                                <img src="${ghosts[ghostName].icon}" alt="${ghostName}" onerror="this.style.display='none'; this.parentNode.innerHTML='üëª';">
                            </div>
                            <div class="ghost-name">${ghostName}</div>
                            <div class="evidence-list">
                                ${ghosts[ghostName].evidence.map(ev => `
                                    <span class="evidence-badge ${selectedEvidence.includes(ev) ? 'selected' : ''}">${getEvidenceName(ev)}</span>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function showGhostDetails(ghostName) {
            const ghost = ghosts[ghostName];
            const modal = document.getElementById('ghost-modal');
            const details = document.getElementById('ghost-details');
            
            details.innerHTML = `
                <div class="modal-ghost-name">
                    <img src="${ghost.icon}" alt="${ghostName}" style="width: 60px; height: 60px; vertical-align: middle; margin-right: 15px; border-radius: 8px;" onerror="this.style.display='none';">
                    ${ghostName}
                </div>
                
                <div class="ghost-section">
                    <h3>Evidence Required</h3>
                    <div class="evidence-list">
                        ${ghost.evidence.map(ev => `
                            <span class="evidence-badge">${getEvidenceName(ev)}</span>
                        `).join('')}
                    </div>
                </div>
                
                <div class="ghost-section">
                    <h3>Strength</h3>
                    <p>${ghost.strength}</p>
                </div>
                
                <div class="ghost-section">
                    <h3>Weakness</h3>
                    <p>${ghost.weakness}</p>
                </div>
                
                <div class="ghost-section">
                    <h3>Hunting Tips</h3>
                    <p>${ghost.tips}</p>
                </div>
            `;
            
            modal.style.display = 'block';
        }

        function showMapDetails(mapName) {
            const map = maps[mapName];
            const modal = document.getElementById('map-modal');
            const details = document.getElementById('map-details');
            
            details.innerHTML = `
                <div class="modal-ghost-name">${mapName}</div>
                
                <div style="text-align: center; margin-bottom: 30px;">
                    <div style="width: 100%; max-width: 400px; height: 250px; margin: 0 auto; border: 2px solid #444; border-radius: 8px; overflow: hidden; background: #333;">
                        <img src="${map.image}" alt="${mapName}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.style.display='none'; this.parentNode.innerHTML='<div style=\\\'display: flex; align-items: center; justify-content: center; height: 100%; color: #666; font-size: 2em;\\\'>üó∫Ô∏è</div>';">
                    </div>
                    <p style="color: #bbb; margin-top: 10px;">Map layout</p>
                </div>
                
                <div class="ghost-section">
                    <h3>Cursed Objects & Locations</h3>
                    ${map.cursedObjects.map(obj => `
                        <div style="margin-bottom: 20px; background: #2a2a2a; padding: 15px; border-radius: 8px;">
                            <h4 style="color: #4CAF50; margin-bottom: 10px;">${obj.type}</h4>
                            <div style="color: #bbb;">
                                <strong>Location:</strong>
                                <ul style="margin-top: 5px; margin-left: 20px;">
                                    ${obj.locations.map(location => `<li>${location}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="ghost-section">
                    <h3>Quick Reference</h3>
                    <p><strong>Total Cursed Objects:</strong> ${map.cursedObjects.length}</p>
                    <p><strong>Object Types:</strong> ${[...new Set(map.cursedObjects.map(obj => obj.type))].join(', ')}</p>
                </div>
            `;
            
            modal.style.display = 'block';
        }

        // Modal functionality
        document.addEventListener('DOMContentLoaded', function() {
            const modals = document.querySelectorAll('.modal');
            const closeButtons = document.querySelectorAll('.close');
            
            closeButtons.forEach(closeBtn => {
                closeBtn.onclick = function() {
                    this.closest('.modal').style.display = 'none';
                };
            });
            
            window.onclick = function(event) {
                modals.forEach(modal => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            };
        });
    </script>
</body>
</html>
